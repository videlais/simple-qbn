
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Introduction Â· HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 6.1.4">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/@honkit/honkit-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="scenes.html" />
    
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter active" data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">History of Related Terms</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="scenes.html">
            
                <a href="scenes.html">
            
                    
                    Scenes and Cycles (1983)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="episodes.html">
            
                <a href="episodes.html">
            
                    
                    Episodes and Sequences (1989)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="sculpturalmodel.html">
            
                <a href="sculpturalmodel.html">
            
                    
                    Sculptural Hypertext Model (2001)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="storylet.html">
            
                <a href="storylet.html">
            
                    
                    Storylet (2010)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="qbn.html">
            
                <a href="qbn.html">
            
                    
                    Quality-Based Narrative (2010)
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Metaphors in SimpleQBN</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="expressions.html">
            
                <a href="expressions.html">
            
                    
                    Expressions and QualitySet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="cards.html">
            
                <a href="cards.html">
            
                    
                    Decks and Cards
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="State.html">
            
                <a href="State.html">
            
                    
                    State Management
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Examples</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="examples/deckbuilding.html">
            
                <a href="examples/deckbuilding.html">
            
                    
                    Deck Building
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="examples/storygates.html">
            
                <a href="examples/storygates.html">
            
                    
                    Story Gates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="examples/webbuild.html">
            
                <a href="examples/webbuild.html">
            
                    
                    Bundled for Web
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Introduction</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="simpleqbn">SimpleQBN</h1>
<p><em>Because nothing about quality-based narratives is actually simple.</em></p>
<p>SimpleQBN is a quality-based narrative (QBN) generic JavaScript library for use in browsers or Node.js-based projects. It provides state management and resolves expressions for checking openness (availability) based on states changes.</p>
<p>This project is based on another project <a href="https://github.com/videlais/quis" target="_blank">Quis</a>, which it uses to resolve expressions.</p>
<h2 id="state-and-reactive-state">State and Reactive State</h2>
<p>SimpleQBN provides two distinct architectures for managing game state:</p>
<ul>
<li>Manual, State-based, and;</li>
<li>Automatic, Reactive State-based.</li>
</ul>
<p><strong>These two systems are incompatible and cannot be mixed within the same application.</strong></p>
<h3 id="original-state-architecture">Original State Architecture</h3>
<p>The original architecture uses the <code>State</code> class along with <code>Card</code>, <code>Deck</code>, <code>Expression</code>, and <code>QualitySet</code> classes. This architecture requires manual state passing and explicit availability checking.</p>
<p><strong>Key Classes:</strong> <code>State</code>, <code>Card</code>, <code>Deck</code>, <code>Expression</code>, <code>QualitySet</code></p>
<p><strong>Example:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">State</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'simple-qbn/State'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Card</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'simple-qbn/Card'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Deck</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'simple-qbn/Deck'</span>;

<span class="hljs-comment">// Create game state</span>
<span class="hljs-keyword">const</span> gameState = <span class="hljs-keyword">new</span> <span class="hljs-title class_">State</span>();
gameState.<span class="hljs-title function_">set</span>(<span class="hljs-string">'health'</span>, <span class="hljs-number">100</span>);
gameState.<span class="hljs-title function_">set</span>(<span class="hljs-string">'hasKey'</span>, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// Create cards with quality requirements</span>
<span class="hljs-keyword">const</span> healingCard = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Card</span>(
    <span class="hljs-string">'Drink a healing potion'</span>,
    [<span class="hljs-string">'$health &lt; 80'</span>]);
<span class="hljs-keyword">const</span> doorCard = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Card</span>(
    <span class="hljs-string">'Open the locked door'</span>,
    [<span class="hljs-string">'$hasKey == true'</span>]);

<span class="hljs-comment">// Create deck and add cards</span>
<span class="hljs-keyword">const</span> deck = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Deck</span>();
deck.<span class="hljs-title function_">addCard</span>(
    healingCard.<span class="hljs-property">content</span>,
    healingCard.<span class="hljs-property">qualities</span>);
deck.<span class="hljs-title function_">addCard</span>(
    doorCard.<span class="hljs-property">content</span>,
    doorCard.<span class="hljs-property">qualities</span>);

<span class="hljs-comment">// Check availability manually.</span>
<span class="hljs-comment">// Need to pass state each time.</span>
<span class="hljs-keyword">const</span> availableCards = deck.<span class="hljs-title function_">draw</span>(gameState, <span class="hljs-number">5</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${availableCards.length}</span> cards available`</span>);
</code></pre>
<h3 id="reactive-architecture">Reactive Architecture</h3>
<p>The reactive architecture uses <code>ReactiveState</code> with <code>ReactiveCard</code>, <code>ReactiveDeck</code>, <code>ReactiveExpression</code>, and <code>ReactiveQualitySet</code>. This architecture provides automatic updates and event-driven state management.</p>
<p><strong>Key Classes:</strong> <code>ReactiveState</code>, <code>ReactiveCard</code>, <code>ReactiveDeck</code>, <code>ReactiveExpression</code>, <code>ReactiveQualitySet</code></p>
<p><strong>Example:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactiveState</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'simple-qbn/reactive/State'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactiveCard</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'simple-qbn/reactive/Card'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactiveDeck</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'simple-qbn/reactive/Deck'</span>;

<span class="hljs-comment">// Create reactive game state.</span>
<span class="hljs-keyword">const</span> gameState = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveState</span>();
gameState.<span class="hljs-title function_">set</span>(<span class="hljs-string">'health'</span>, <span class="hljs-number">100</span>);
gameState.<span class="hljs-title function_">set</span>(<span class="hljs-string">'hasKey'</span>, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// Create reactive cards.</span>
<span class="hljs-keyword">const</span> healingCard = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveCard</span>(
    <span class="hljs-string">'Drink a healing potion'</span>,
    [<span class="hljs-string">'$health &lt; 80'</span>]);
<span class="hljs-keyword">const</span> doorCard = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveCard</span>(
    <span class="hljs-string">'Open the locked door'</span>,
    [<span class="hljs-string">'$hasKey == true'</span>]);

<span class="hljs-comment">// Create reactive deck and bind to state.</span>
<span class="hljs-keyword">const</span> deck = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactiveDeck</span>(
    [healingCard, doorCard],
    gameState);

<span class="hljs-comment">// Subscribe to automatic updates.</span>
deck.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">availableCards</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${availableCards.length}</span> cards now available`</span>);
});

<span class="hljs-comment">// State changes trigger automatic updates.</span>
gameState.<span class="hljs-title function_">set</span>(<span class="hljs-string">'health'</span>, <span class="hljs-number">50</span>);
</code></pre>
<h3 id="architecture-compatibility">Architecture Compatibility</h3>
<p><strong>Important:</strong> The two architectures are mutually exclusive:</p>
<ul>
<li><strong>Original classes</strong> (<code>Card</code>, <code>Deck</code>, etc.) work only with <code>State</code></li>
<li><strong>Reactive classes</strong> (<code>ReactiveCard</code>, <code>ReactiveDeck</code>, etc.) work only with <code>ReactiveState</code></li>
<li>You cannot pass a <code>State</code> to reactive classes or a <code>ReactiveState</code> to original classes</li>
</ul>
<p><strong>Choose one architecture for your entire application.</strong></p>
<h2 id="expression-language">Expression Language</h2>
<p>Starting with version 1.5.0, SimpleQBN uses <a href="https://www.npmjs.com/package/quis" target="_blank">Quis</a> for expression evaluation with pure Quis syntax.</p>
<p>Previous versions used TinyQBN format and MongoDB query language compatibility, but as of 1.5.0, the library has been simplified to use only Quis string expressions to reduce dependencies and code size.</p>
<h2 id="history-and-documentation">History and Documentation</h2>
<p>HonKit is used to create <a href="https://videlais.github.io/simple-qbn/" target="_blank">a history and documentation of this project</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="scenes.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Scenes and Cycles (1983)">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Introduction","level":"1.1","depth":1,"next":{"title":"Scenes and Cycles (1983)","level":"2.1","depth":1,"path":"scenes.md","ref":"./scenes.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"root":"./notes","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"README.md","mtime":"2025-10-05T03:31:04.429Z","type":"markdown"},"gitbook":{"version":"6.1.4","time":"2025-10-05T03:31:04.846Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/@honkit/honkit-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

